{% include "./base/header.html" %}

<div class="container col-sm-10 col-md-8 col-lg-8 mt-4 mb-2">
  <section id="capability-leads" class="mt-4">
    <h2 class="mb-3">Capabilities and leads</h2>
    {% if capabilities and capabilities.length > 0 %} {% for capability in capabilities %}
    <ul class="list-group list-hover mb-2">
      <li
        class="list-group-item list-group-item-action"
        style="max-width: 100%; display: flex; flex-direction: row; align-items: center; justify-content: space-between"
        data-bs-toggle="collapse"
        data-bs-target="#collapse{{ capability.capabilityId }}"
      >
        <span>{{ capability.capabilityName }}</span><span>&#9660;</span>
      </li>
      <div id="collapse{{ capability.capabilityId }}" class="collapse">
        <div class="card card-body py-2">
          <div class="row g-0">
            <div class="col-md-4">
              <img
                id="userImage{{ capability.capabilityId }}"
                alt="User Image"
                class="img-fluid"
                onerror="setDefaultImage(this)"
                src="{{ capability.leadPhoto }}"
              />
            </div>
            <div class="col-md-8">
              <div class="card-body d-flex flex-column h-100">
                <div class="d-flex">
                  <p>Lead name:&nbsp;</p>
                  <h5 class="card-title">{{capability.leadName }}</h5>
                </div>
                <p class="card-text">{{capability.leadMessage }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ul>
    {% endfor %} {% else %}
    <div class="alert alert-danger" role="alert">There are no capabilities</div>
    {% endif %}
  </section>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" defer></script>

<script>
  function setDefaultImage(imgElement) {
    imgElement.src = '../public/default-photo.jpg';
    imgElement.alt = 'Default Image';
  }
</script>

{% include "./base/footer.html" %}
